<!DOCTYPE html>
<html lang="en">
<head>

    

    <meta charset="utf-8">
    <meta name=viewport content="width=device-width, initial-scale=1">
    <meta name=author content="Darius A. Görgen">

    <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Translating EUMETSAT’s .nat files to GTiff | Darius A. Görgen</title>
<meta name="generator" content="Jekyll v3.9.0" />
<meta property="og:title" content="Translating EUMETSAT’s .nat files to GTiff" />
<meta name="author" content="darius" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Python code to translate EUMETSAT’s .nat datasets to GTiffs." />
<meta property="og:description" content="Python code to translate EUMETSAT’s .nat datasets to GTiffs." />
<link rel="canonical" href="https://www.dariusgoergen.com/2020-05-10-nat2tif/" />
<meta property="og:url" content="https://www.dariusgoergen.com/2020-05-10-nat2tif/" />
<meta property="og:site_name" content="Darius A. Görgen" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2020-05-10T10:00:00+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Translating EUMETSAT’s .nat files to GTiff" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"darius"},"dateModified":"2020-05-10T10:00:00+00:00","datePublished":"2020-05-10T10:00:00+00:00","description":"Python code to translate EUMETSAT’s .nat datasets to GTiffs.","headline":"Translating EUMETSAT’s .nat files to GTiff","mainEntityOfPage":{"@type":"WebPage","@id":"https://www.dariusgoergen.com/2020-05-10-nat2tif/"},"url":"https://www.dariusgoergen.com/2020-05-10-nat2tif/"}</script>
<!-- End Jekyll SEO tag -->


    <link rel="apple-touch-icon-precomposed" sizes="57x57" href="https://www.dariusgoergen.com/assets/images/favicon/apple-touch-icon-57x57.png" />
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="https://www.dariusgoergen.com/assets/images/favicon/apple-touch-icon-114x114.png" />
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="https://www.dariusgoergen.com/assets/images/favicon/apple-touch-icon-72x72.png" />
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://www.dariusgoergen.com/assets/images/favicon/apple-touch-icon-144x144.png" />
<link rel="apple-touch-icon-precomposed" sizes="60x60" href="https://www.dariusgoergen.com/assets/images/favicon/apple-touch-icon-60x60.png" />
<link rel="apple-touch-icon-precomposed" sizes="120x120" href="https://www.dariusgoergen.com/assets/images/favicon/apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon-precomposed" sizes="76x76" href="https://www.dariusgoergen.com/assets/images/favicon/apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon-precomposed" sizes="152x152" href="https://www.dariusgoergen.com/assets/images/favicon/apple-touch-icon-152x152.png" />
<link rel="icon" type="image/png" href="https://www.dariusgoergen.com/assets/images/favicon/favicon-196x196.png" sizes="196x196" />
<link rel="icon" type="image/png" href="https://www.dariusgoergen.com/assets/images/favicon/favicon-96x96.png" sizes="96x96" />
<link rel="icon" type="image/png" href="https://www.dariusgoergen.com/assets/images/favicon/favicon-32x32.png" sizes="32x32" />
<link rel="icon" type="image/png" href="https://www.dariusgoergen.com/assets/images/favicon/favicon-16x16.png" sizes="16x16" />
<link rel="icon" type="image/png" href="https://www.dariusgoergen.com/assets/images/favicon/favicon-128.png" sizes="128x128" />
<meta name="application-name" content="&nbsp;"/>
<meta name="msapplication-TileColor" content="#FFFFFF" />
<meta name="msapplication-TileImage" content="mstile-144x144.png" />
<meta name="msapplication-square70x70logo" content="mstile-70x70.png" />
<meta name="msapplication-square150x150logo" content="mstile-150x150.png" />
<meta name="msapplication-wide310x150logo" content="mstile-310x150.png" />
<meta name="msapplication-square310x310logo" content="mstile-310x310.png" />


    <link rel="canonical" href="https://www.dariusgoergen.com/2020-05-10-nat2tif/">
    <link rel="alternate" type="application/rss+xml" title="" href="https://www.dariusgoergen.com/feed.xml" />

    <style>
    
    @charset "UTF-8";
/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */
/* Document ========================================================================== */
/** 1. Correct the line height in all browsers. 2. Prevent adjustments of font size after orientation changes in iOS. */
html { line-height: 1.15; /* 1 */ -webkit-text-size-adjust: 100%; /* 2 */ }

/* Sections ========================================================================== */
/** Remove the margin in all browsers. */
body { margin: 0; }

/** Render the `main` element consistently in IE. */
main { display: block; }

/** Correct the font size and margin on `h1` elements within `section` and `article` contexts in Chrome, Firefox, and Safari. */
h1 { font-size: 2em; margin: 0.67em 0; }

/* Grouping content ========================================================================== */
/** 1. Add the correct box sizing in Firefox. 2. Show the overflow in Edge and IE. */
hr { box-sizing: content-box; /* 1 */ height: 0; /* 1 */ overflow: visible; /* 2 */ }

/** 1. Correct the inheritance and scaling of font size in all browsers. 2. Correct the odd `em` font sizing in all browsers. */
pre { font-family: monospace, monospace; /* 1 */ font-size: 1em; /* 2 */ }

/* Text-level semantics ========================================================================== */
/** Remove the gray background on active links in IE 10. */
a { background-color: transparent; }

/** 1. Remove the bottom border in Chrome 57- 2. Add the correct text decoration in Chrome, Edge, IE, Opera, and Safari. */
abbr[title] { border-bottom: none; /* 1 */ text-decoration: underline; /* 2 */ text-decoration: underline dotted; /* 2 */ }

/** Add the correct font weight in Chrome, Edge, and Safari. */
b, strong { font-weight: bolder; }

/** 1. Correct the inheritance and scaling of font size in all browsers. 2. Correct the odd `em` font sizing in all browsers. */
code, kbd, samp { font-family: monospace, monospace; /* 1 */ font-size: 1em; /* 2 */ }

/** Add the correct font size in all browsers. */
small { font-size: 80%; }

/** Prevent `sub` and `sup` elements from affecting the line height in all browsers. */
sub, sup { font-size: 75%; line-height: 0; position: relative; vertical-align: baseline; }

sub { bottom: -0.25em; }

sup { top: -0.5em; }

/* Embedded content ========================================================================== */
/** Remove the border on images inside links in IE 10. */
img { border-style: none; }

/* Forms ========================================================================== */
/** 1. Change the font styles in all browsers. 2. Remove the margin in Firefox and Safari. */
button, input, optgroup, select, textarea { font-family: inherit; /* 1 */ font-size: 100%; /* 1 */ line-height: 1.15; /* 1 */ margin: 0; /* 2 */ }

/** Show the overflow in IE. 1. Show the overflow in Edge. */
button, input { /* 1 */ overflow: visible; }

/** Remove the inheritance of text transform in Edge, Firefox, and IE. 1. Remove the inheritance of text transform in Firefox. */
button, select { /* 1 */ text-transform: none; }

/** Correct the inability to style clickable types in iOS and Safari. */
button, [type="button"], [type="reset"], [type="submit"] { -webkit-appearance: button; }

/** Remove the inner border and padding in Firefox. */
button::-moz-focus-inner, [type="button"]::-moz-focus-inner, [type="reset"]::-moz-focus-inner, [type="submit"]::-moz-focus-inner { border-style: none; padding: 0; }

/** Restore the focus styles unset by the previous rule. */
button:-moz-focusring, [type="button"]:-moz-focusring, [type="reset"]:-moz-focusring, [type="submit"]:-moz-focusring { outline: 1px dotted ButtonText; }

/** Correct the padding in Firefox. */
fieldset { padding: 0.35em 0.75em 0.625em; }

/** 1. Correct the text wrapping in Edge and IE. 2. Correct the color inheritance from `fieldset` elements in IE. 3. Remove the padding so developers are not caught out when they zero out `fieldset` elements in all browsers. */
legend { box-sizing: border-box; /* 1 */ color: inherit; /* 2 */ display: table; /* 1 */ max-width: 100%; /* 1 */ padding: 0; /* 3 */ white-space: normal; /* 1 */ }

/** Add the correct vertical alignment in Chrome, Firefox, and Opera. */
progress { vertical-align: baseline; }

/** Remove the default vertical scrollbar in IE 10+. */
textarea { overflow: auto; }

/** 1. Add the correct box sizing in IE 10. 2. Remove the padding in IE 10. */
[type="checkbox"], [type="radio"] { box-sizing: border-box; /* 1 */ padding: 0; /* 2 */ }

/** Correct the cursor style of increment and decrement buttons in Chrome. */
[type="number"]::-webkit-inner-spin-button, [type="number"]::-webkit-outer-spin-button { height: auto; }

/** 1. Correct the odd appearance in Chrome and Safari. 2. Correct the outline style in Safari. */
[type="search"] { -webkit-appearance: textfield; /* 1 */ outline-offset: -2px; /* 2 */ }

/** Remove the inner padding in Chrome and Safari on macOS. */
[type="search"]::-webkit-search-decoration { -webkit-appearance: none; }

/** 1. Correct the inability to style clickable types in iOS and Safari. 2. Change font properties to `inherit` in Safari. */
::-webkit-file-upload-button { -webkit-appearance: button; /* 1 */ font: inherit; /* 2 */ }

/* Interactive ========================================================================== */
/* Add the correct display in Edge, IE 10+, and Firefox. */
details { display: block; }

/* Add the correct display in all browsers. */
summary { display: list-item; }

/* Misc ========================================================================== */
/** Add the correct display in IE 10+. */
template { display: none; }

/** Add the correct display in IE 10. */
[hidden] { display: none; }

/* GitHub style for Pygments syntax highlighter, for use with Jekyll Courtesy of GitHub.com */
.highlight .c { color: #999988; font-style: italic; }
.highlight .err { color: #a61717; background-color: #e3d2d2; }
.highlight .k { font-weight: bold; }
.highlight .o { font-weight: bold; }
.highlight .cm { color: #999988; font-style: italic; }
.highlight .cp { color: #999999; font-weight: bold; }
.highlight .c1 { color: #999988; font-style: italic; }
.highlight .cs { color: #999999; font-weight: bold; font-style: italic; }
.highlight .gd { color: #000000; background-color: #ffdddd; }
.highlight .gd .x { color: #000000; background-color: #ffaaaa; }
.highlight .ge { font-style: italic; }
.highlight .gr { color: #aa0000; }
.highlight .gh { color: #999999; }
.highlight .gi { color: #000000; background-color: #ddffdd; }
.highlight .gi .x { color: #000000; background-color: #aaffaa; }
.highlight .go { color: #888888; }
.highlight .gp { color: #555555; }
.highlight .gs { font-weight: bold; }
.highlight .gu { color: #800080; font-weight: bold; }
.highlight .gt { color: #aa0000; }
.highlight .kc { font-weight: bold; }
.highlight .kd { font-weight: bold; }
.highlight .kn { font-weight: bold; }
.highlight .kp { font-weight: bold; }
.highlight .kr { font-weight: bold; }
.highlight .kt { color: #445588; font-weight: bold; }
.highlight .m { color: #009999; }
.highlight .s { color: #dd1144; }
.highlight .n { color: #333333; }
.highlight .na { color: teal; }
.highlight .nb { color: #0086b3; }
.highlight .nc { color: #445588; font-weight: bold; }
.highlight .no { color: teal; }
.highlight .ni { color: purple; }
.highlight .ne { color: #990000; font-weight: bold; }
.highlight .nf { color: #990000; font-weight: bold; }
.highlight .nn { color: #555555; }
.highlight .nt { color: navy; }
.highlight .nv { color: teal; }
.highlight .ow { font-weight: bold; }
.highlight .w { color: #bbbbbb; }
.highlight .mf { color: #009999; }
.highlight .mh { color: #009999; }
.highlight .mi { color: #009999; }
.highlight .mo { color: #009999; }
.highlight .sb { color: #dd1144; }
.highlight .sc { color: #dd1144; }
.highlight .sd { color: #dd1144; }
.highlight .s2 { color: #dd1144; }
.highlight .se { color: #dd1144; }
.highlight .sh { color: #dd1144; }
.highlight .si { color: #dd1144; }
.highlight .sx { color: #dd1144; }
.highlight .sr { color: #009926; }
.highlight .s1 { color: #dd1144; }
.highlight .ss { color: #990073; }
.highlight .bp { color: #999999; }
.highlight .vc { color: teal; }
.highlight .vg { color: teal; }
.highlight .vi { color: teal; }
.highlight .il { color: #009999; }
.highlight .gc { color: #999; background-color: #EAF2F5; }

body, html { font-size: 62.5%; }

body { font: 16px "Helvetica Neue", Helvetica, Arial, sans-serif; color: #666; }

h1, h2, h3, h4 { font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; color: #222; -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; }

h1 { font-size: 3rem; letter-spacing: -1px; color: #222; font-weight: 700; }

h2 { font-size: 2.2rem; }

h3 { font-size: 2rem; }

h4 { font-size: 1.6rem; }

a { color: #4b0082; text-decoration: underline; }

p { line-height: 1.7; color: #666; font-weight: 300; margin-bottom: 20px; letter-spacing: 0.4px; }
@media only screen and (max-width: 400px) { p { letter-spacing: 0.2px; } }

strong { font-weight: 400; color: #000; }

ul li, ol li { line-height: 2.4rem; font-weight: 300; color: #666; }

img, pre, iframe { max-width: 100%; }

img, pre { border-radius: 4px; }

figcaption { position: relative; top: -20px; left: 0; right: 0; margin: 0 auto; width: 100%; text-align: center; font-size: 1.3rem; color: #aaa; font-weight: 300; }
@media only screen and (max-width: 400px) { figcaption { font-size: 1.2rem; } }

blockquote { padding-left: 15px; border-left: 3px solid #eee; }

hr { border: none; height: 1px; margin: 40px auto; background: #eee; width: 100%; }

figure.highlight { width: 100%; margin: 0; }

code, tt { padding: 1px 0; font-family: "Consolas", Liberation Mono, Menlo, Courier, monospace; font-size: 12px; line-height: 20px; background: #fff; border-radius: 2px; }

pre { box-sizing: border-box; margin: 0 0 1.75em 0; width: 100%; padding: 5px 10px; font-family: "Consolas", Liberation Mono, Menlo, Courier, monospace; font-size: 1.2rem; line-height: 2rem; overflow: auto; background: #fff; border: 1px solid #ededed; border-radius: 2px; }

.wrapper-normal, .wrapper-large { height: 100%; width: 96%; margin: 0 auto; }
@media only screen and (max-width: 400px) { .wrapper-normal, .wrapper-large { width: 88%; } }
@media only screen and (min-width: 400px) and (max-width: 1050px) { .wrapper-normal, .wrapper-large { width: 88%; } }

.wrapper-normal { max-width: 560px; }

.wrapper-large { max-width: 810px; }

/* general helpers */
.text-center { text-align: center; }

.clearfix:before, .clearfix:after { content: ""; display: table; }

.clearfix:after { clear: both; }

/* animations */
.animated { animation: fade-in-down 0.6s; animation-delay: 0.3s; animation-fill-mode: both; }

@keyframes fade-in-down { 0% { opacity: 0; transform: translateY(-10px); }
  100% { opacity: 1; transform: translateY(0); } }
.home, .blog, .projects { margin-top: 125px; }
.home > .list, .blog > .list, .projects > .list { border-top: 1px solid #ededed; margin-top: 30px; padding-top: 40px; position: relative; }
.home > .list:before, .blog > .list:before, .projects > .list:before { display: block; content: " "; width: 7px; height: 7px; border: #ededed 1px solid; position: absolute; top: -5px; left: 50%; margin-left: -5px; background: #FFF; box-shadow: #FFF 0 0 0 5px; border-radius: 3px; }

.home > .list > .item, .blog > .list > .item, .projects > .list > .item { display: block; width: 95%; margin: 0 auto; }
.home > .list > .item > .url, .blog > .list > .item > .url, .projects > .list > .item > .url { width: 100%; display: block; padding: 20px 0; text-decoration: none; }
.home > .list > .item > .url > .title, .blog > .list > .item > .url > .title, .projects > .list > .item > .url > .title { margin: 0; width: 75%; font-weight: 500; transition: all ease-in-out 0.2s; }
.home > .list > .item:hover > .url > .title, .blog > .list > .item:hover > .url > .title, .projects > .list > .item:hover > .url > .title { color: #4b0082; }
.home > .list aside, .blog > .list aside, .projects > .list aside { position: relative; top: 2px; margin: 0; width: 25%; float: right; font-weight: 300; color: #aaa; text-align: right; transition: all ease-in-out 0.2s; }
.home > .list .item:hover .url aside, .blog > .list .item:hover .url aside, .projects > .list .item:hover .url aside { color: #666; }

.blog > .list > .item > .url > .title, .projects > .list > .item > .url > .title { display: inline; }
.blog > .list > .item > .url > .emoji, .projects > .list > .item > .url > .emoji { display: inline; position: relative; top: -4px; margin-right: 10px; }

.page { margin-top: 125px; }
.page > h1 { text-align: center; margin-bottom: 6rem; }

.about img { width: 50%; margin: 0 auto; display: block; }

.post { margin-top: 125px; }
.post > .title { text-align: center; margin-bottom: 3rem; }
.post > .date, .post > .post-tags { color: #aaa; font-weight: 300; font-size: 1.4rem; text-transform: uppercase; text-align: center; display: block; margin-bottom: 6rem; letter-spacing: 1px; -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; }
.post > .date { margin-bottom: 2rem; }
.post > .post-tags > .item { padding: 2px 8px; border-radius: 3px; font-size: 1.1rem; background: #ededed; color: #666; letter-spacing: 1px; margin: 3px 1px; text-decoration: none; display: inline-block; }
.post > h2, .post > h3, .post > h4 { margin-top: 40px; }
.post > h2 a, .post > h3 a, .post > h4 a { text-decoration: none; }
.post > .title-image { max-height: 120px; display: block; margin: 0 auto; }
.post > .blog-navigation { font-size: 1.4rem; display: block; width: auto; overflow: hidden; }
.post > .blog-navigation a { display: block; width: 50%; float: left; margin: 1em 0; }
.post > .blog-navigation .next { text-align: right; }

.tags { margin-top: 125px; }
.tags > .list { border-top: 1px solid #ededed; margin-top: 30px; padding-top: 40px; position: relative; }
.tags > .list:before { display: block; content: " "; width: 7px; height: 7px; border: #ededed 1px solid; position: absolute; top: -5px; left: 50%; margin-left: -5px; background: #FFF; box-shadow: #FFF 0 0 0 5px; border-radius: 3px; }

.tags > .list > .item { font-weight: 300; text-transform: uppercase; text-align: center; -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; padding: 3px 9px; border-radius: 3px; font-size: 1.3rem; background: #ededed; color: #666; letter-spacing: 1px; margin: 0 0.5rem 1rem; text-decoration: none; display: inline-block; }

.tag-list > .list { padding: 0; }
.tag-list > .list > .item { display: block; width: 80%; margin: 0 10%; }
.tag-list > .list > .item > .url { width: 100%; height: 100%; display: block; padding: 20px 0; text-decoration: none; }
.tag-list > .list > .item > .url > .title { margin: 0; width: 75%; font-weight: 400; transition: all ease-in-out 0.2s; font-size: 1.6rem; }
.tag-list > .list > .item:hover > .url > .title { color: #4b0082; }
.tag-list > .list aside { position: relative; top: 2px; margin: 0; width: 25%; float: right; font-weight: 300; color: #aaa; text-align: right; transition: all ease-in-out 0.2s; font-size: 1.6rem; }
.tag-list > .list .item:hover .url aside { color: #666; }

.author { padding: 3rem 0; border-bottom: 1px solid #ededed; border-top: 1px solid #ededed; max-width: 100%; margin: 4rem auto 0; }
.author > .toleft > .selfie { width: 90%; border-radius: 100%; }
.author > .toright > .name, .author > .toright > .bio { width: 60%; display: inline-block; }
.author > .toright > .name { font-size: 1.5rem; font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; font-weight: 500; margin: 6px 0 0; }
@media only screen and (max-width: 400px) { .author > .toright > .name { width: 100%; display: block; } }
@media only screen and (min-width: 400px) and (max-width: 1050px) { .author > .toright > .name { width: 100%; display: block; } }
.author > .toright > .bio { font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; font-weight: 300; color: #aaa; font-size: 1.3rem; text-align: justify; line-height: 1.5; margin: 0; }
@media only screen and (max-width: 400px) { .author > .toright > .bio { width: 100%; display: block; } }
@media only screen and (min-width: 400px) and (max-width: 1050px) { .author > .toright > .bio { width: 100%; display: block; } }
.author > .toleft { width: 10%; display: inline-block; }
@media only screen and (max-width: 400px) { .author > .toleft { width: 20%; } }
@media only screen and (min-width: 400px) and (max-width: 1050px) { .author > .toleft { width: 20%; } }
.author > .toright { width: 89%; display: inline-block; vertical-align: top; }
@media only screen and (max-width: 400px) { .author > .toright { width: 78%; } }
@media only screen and (min-width: 400px) and (max-width: 1050px) { .author > .toright { width: 78%; } }

.no-disqus { border-bottom: none; padding-bottom: 0; }

.disqus { margin: 0 auto; max-width: 100%; padding: 40px 0; }

.footer-main { border-top: 1px solid #ededed; padding: 40px 0; margin: 40px 0 0; font-size: 1.3rem; color: #aaa; font-weight: 300; text-align: center; position: relative; }
.footer-main:before { display: block; content: " "; width: 7px; height: 7px; border: #ededed 1px solid; position: absolute; top: -5px; left: 50%; margin-left: -5px; background: #FFF; box-shadow: #FFF 0 0 0 5px; border-radius: 3px; }
.footer-main > .copyright { padding-left: 10px; }
.footer-main > .link { display: inline; vertical-align: middle; }
.footer-main > .link > .icon { width: 12px !important; height: 12px !important; display: inline-block; fill: #aaa !important; transition: ease-in-out all 0.3s; position: relative; top: -2px; margin: 0; left: 2px; }
.footer-main > .link > .icon:hover { fill: #4b0082 !important; }
.footer-main > .extra { color: #aaa; margin-top: 0; }
.footer-main > .extra > .link { color: #222; text-decoration: none; border-bottom: 1px solid transparent; transition: ease-in-out all 0.3s; padding-bottom: 1px; }
.footer-main > .extra > .link:hover { border-color: #aaa; }

.header-home { display: block; margin: 0 auto; text-align: center; position: relative; z-index: 99; }
.header-home > .link > .selfie { width: 125px; height: 125px; margin-bottom: 25px; border-radius: 100%; transition: all 0.2s; opacity: 1; }
.header-home > .link > .selfie:hover { box-shadow: 0 0px 4px 0 rgba(0, 0, 0, 0.18), 0 0px 12px 0 rgba(0, 0, 0, 0.15); opacity: 0.8; }
.header-home > .title { font-size: 4rem; margin: 0 0 13px; }
.header-home > .description { font-size: 1.85rem; font-weight: 300; font-style: normal; color: #aaa; width: 70%; margin: 0 auto 30px; }
.header-home > .description a { font-weight: 200; }

.nav > .list, .nav-home > .list { list-style: none; margin: 0; padding: 0 13px 0; }
.nav > .list > .item, .nav-home > .list > .item { display: inline-block; }
.nav > .list > .item > .link, .nav-home > .list > .item > .link { display: inline-block; font-weight: 300; font-size: 1.4rem; padding: 20px 10px; text-decoration: none; }

.nav { position: absolute; right: 0; top: 0; }
.nav > .list { padding: 0 13px 0; }
.nav > .list > .item > .link { font-size: 1.4rem; padding: 20px 10px; }

.nav-home { margin-top: 40px; text-align: center; }
.nav-home > .list { padding: 0; }
.nav-home > .list > .item > .link { font-size: 2rem; padding: 7px 15px; margin: 0; border-radius: 4%; transition: all 0.4s ease-in-out; }
.nav-home > .list > .item > .link:hover { color: #666; }

.evidence { background-image: linear-gradient(to bottom, rgba(39, 243, 106, 0.15), rgba(39, 243, 106, 0.15)); color: #222; }

.star > .url > .title { width: auto !important; display: inline; background-image: linear-gradient(rgba(39, 243, 106, 0.15), rgba(39, 243, 106, 0.15)); }

.twitter-tweet { margin: 10px auto; }

.icon { display: inline-block; width: 25px; height: 25px; fill: #000; text-align: center; color: #000; margin: 7px auto; vertical-align: middle; }

.caption { position: relative; top: 1rem; left: 0; right: 0; margin: 0 auto; width: 100%; text-align: center; font-size: 1.3rem; }

.bigger-image { min-width: 130%; margin: 5rem 0 5rem -15%; }
@media only screen and (max-width: 400px) { .bigger-image { min-width: 114%; margin: 2rem 0 2rem -7%; } }
@media only screen and (min-width: 400px) and (max-width: 1050px) { .bigger-image { min-width: 114%; margin: 2rem 0 2rem -7%; } }

.breaker { height: 1px; margin: 6rem auto; width: 100%; }
.breaker:before { content: "• • •"; width: 100%; text-align: center; display: block; color: #aaa; letter-spacing: 4px; position: relative; top: -8px; }

.lost-container { text-align: center; }

.pagination { width: 95%; margin: 3rem auto 0; text-align: center; }
.pagination > .page_number { display: inline-block; font-size: 1.3rem; }
.pagination > .previous, .pagination > .next { display: inline-block; font-size: 1.8rem; position: relative; top: 1px; padding: 1px 9px; }
.pagination > .hidden { visibility: hidden; }

.related { margin: 10rem 0 0rem; }

.share { float: right; width: 40%; display: inline; text-align: right; position: relative; top: -10px; }
@media only screen and (max-width: 400px) { .share { width: 100%; display: block; top: 0; text-align: left; float: none; margin-top: 5px; } }
@media only screen and (min-width: 400px) and (max-width: 1050px) { .share { width: 100%; display: block; top: 0; text-align: left; float: none; margin-top: 5px; } }
.share > .twitter, .share > .facebook, .share > .linkedin, .share > .reddit { display: inline-block; vertical-align: middle; font-size: 13px; font-weight: 700; color: #fff; padding: 6px 10px; border-radius: 3px; margin-left: 5px; text-decoration: none; }
@media only screen and (max-width: 400px) { .share > .twitter, .share > .facebook, .share > .linkedin, .share > .reddit { margin: 0 5px 10px 0; } }
@media only screen and (min-width: 400px) and (max-width: 1050px) { .share > .twitter, .share > .facebook, .share > .linkedin, .share > .reddit { margin: 0 5px 10px 0; } }
.share > .twitter span, .share > .facebook span, .share > .linkedin span, .share > .reddit span { vertical-align: middle; }
.share > .twitter { background: #4fafed; }
.share > .facebook { background: #4361b3; }
.share > .linkedin { background: #0077b5; }
.share > .reddit { background: #ff4500; }
.share svg { width: 16px; height: 16px; margin: 3px; fill: #fff; }

@media only screen and (min-width: 780px) { .side-by-side { width: 130%; margin: 6rem 0 6rem -15%; } }
@media only screen and (max-width: 780px) { .side-by-side { width: 100%; margin: 4rem 0; } }
.side-by-side > .toleft, .side-by-side > .toright { display: inline-block; width: 47.5%; }
@media only screen and (max-width: 780px) { .side-by-side > .toleft img, .side-by-side > .toright img { text-align: center; display: block; margin: 0 auto; } }
@media only screen and (min-width: 780px) { .side-by-side > .toleft { margin-right: 2%; } }
@media only screen and (max-width: 780px) { .side-by-side > .toleft { width: 100%; margin: 0 0 4rem 0; } }
@media only screen and (min-width: 780px) { .side-by-side > .toright { margin-left: 2%; vertical-align: top; } }
@media only screen and (max-width: 780px) { .side-by-side > .toright { width: 100%; margin: 0 0 4rem 0; } }
.side-by-side > .toleft > p, .side-by-side > .toright > p { margin: 0 0 4rem 0; }
@media only screen and (max-width: 780px) { .side-by-side > .toleft > p, .side-by-side > .toright > p { margin: 0; } }

.social-links { margin-top: 20px; margin-left: 15px; }
.social-links > .link { margin: 0; text-decoration: none; position: relative; display: inline-block; height: 35px; width: 35px; }
.social-links > .link:hover > .icon { fill: #4b0082; }
.social-links > .link:hover:before { opacity: 1; display: inline-block; transform: translate3d(0, 0, 0); white-space: nowrap; }
.social-links > .link:before { content: attr(data-title); display: none; position: absolute; bottom: -34px; left: -6px; margin: 0 auto; font-size: 13px; padding: 3px 10px; background: #222; color: #fff; border-radius: 2px; height: 22px; line-height: 22px; opacity: 0; transition: opacity 150ms linear, transform 150ms linear, -webkit-transform 150ms linear; transform: translate3d(0, -8px, 0); z-index: 99; }
.social-links > .link:after { content: ""; position: absolute; top: 35px; left: 13px; width: 0; height: 0; border-left: 5px solid transparent; border-right: 5px solid transparent; border-bottom: 6px solid #222; opacity: 0; transition: opacity 150ms linear, transform 150ms linear, -webkit-transform 150ms linear; transform: translate3d(0, -8px, 0); z-index: 100; }
.social-links > .link:hover:after { opacity: 1; transform: translate3d(0, 0, 0); }
.social-links > .icon { transition: all ease-in-out 0.2s; }

.spoiler { position: relative; }
.spoiler:before { content: ""; background-color: #fafae0; position: absolute; top: 0; bottom: 0; left: 0; right: 0; z-index: 50; }
.spoiler:hover:before { display: none; }

    </style>

</head>
<body>

    <div class="wrapper-large">
        
            <div class="post">
        

            



<nav class="nav">
    <ul class="list">
        
            <li class="item">
                <a class="link" href="https://www.dariusgoergen.com/">Home</a>
            </li>
        

        
            
                <li class="item">
                    <a class="link" href="https://www.dariusgoergen.com/blog">Blog</a>
                </li>
            
        

        
            
                <li class="item">
                    <a class="link" href="https://www.dariusgoergen.com/projects">Projects</a>
                </li>
            
        

        
            
                <li class="item">
                    <a class="link" href="https://www.dariusgoergen.com/about">About</a>
                </li>
            
        

        
            <li class="item">
                <a class="link" href="https://www.dariusgoergen.com/assets/cv-darius-goergen.pdf">Résumé</a>
            </li>
        
    </ul>
</nav>





<h1 class="title">Translating EUMETSAT's .nat files to GTiff</h1>

<span class="date">
    <time datetime="10-05-2020">Sunday. May 10, 2020</time>
     - <span class="reading-time" title="Estimated read time">
    

    
        9 mins
    
</span>

</span>


    <div class="post-tags">
        
            <a class="item" href="https://www.dariusgoergen.com/tags/#msg">msg</a>
        
            <a class="item" href="https://www.dariusgoergen.com/tags/#gtiff">gtiff</a>
        
            <a class="item" href="https://www.dariusgoergen.com/tags/#python">python</a>
        
    </div>


<p>In this tutorial, I am using Python to translate a Meteosat Second Generation (MSG) Native Archive Format (.nat) file to GTiff. Conveniently, there exists a
driver support for these files in both, the <a href="https://gdal.org/drivers/raster/msgn.html">gdal</a> 
and the <a href="https://satpy.readthedocs.io/en/latest/index.html">satpy</a> library.
Here, we are going to use satpy because we also want to resample the data
with its “associated” library <a href="https://pyresample.readthedocs.io/en/latest/">pyresample</a>. First, we will load
all the libraries we are going to need into our Python session.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="n">np</span>
<span class="kn">import</span> <span class="nn">gdal</span>
<span class="kn">import</span> <span class="nn">osr</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">pyresample</span> <span class="k">as</span> <span class="n">pr</span>
<span class="kn">from</span> <span class="nn">satpy</span> <span class="kn">import</span> <span class="n">Scene</span>
</code></pre></div></div>

<p>As opposed to BUFR files, reading <em>.nat</em> files is quite straightforward. All we need to do is 
handing the right reader to the satpy <em>Scene</em> function. We can then take a look
at the available datasets.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">file</span> <span class="o">=</span> <span class="s">"../assets/files/MSG1-SEVI-MSG15-0100-NA-20160531090417.660000000Z-20160531090437-1405098.nat"</span>
<span class="c1"># define reader
</span><span class="n">reader</span> <span class="o">=</span> <span class="s">"seviri_l1b_native"</span>
<span class="c1"># read the file
</span><span class="n">scn</span> <span class="o">=</span> <span class="n">Scene</span><span class="p">(</span><span class="n">filenames</span> <span class="o">=</span> <span class="p">{</span><span class="n">reader</span><span class="p">:[</span><span class="nb">file</span><span class="p">]})</span>
<span class="c1"># extract data set names
</span><span class="n">dataset_names</span> <span class="o">=</span> <span class="n">scn</span><span class="p">.</span><span class="n">all_dataset_names</span><span class="p">()</span>
<span class="c1"># print available datasets
</span><span class="k">print</span><span class="p">(</span><span class="s">'</span><span class="se">\n</span><span class="s">'</span><span class="p">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">dataset_names</span><span class="p">)))</span>
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>## HRV
## IR_016
## IR_039
## IR_087
## IR_097
## IR_108
## IR_120
## IR_134
## VIS006
## VIS008
## WV_062
## WV_073
</code></pre></div></div>
<p>The MSG data is provided as Full Disk, meaning that roughly the complete North-South
extent of the globe from the Atlantic to the Indian Ocean is present in 
each file. For most applications and research questions, it is not necessary
to process an extent that large. This is why as an example, we are going to resample
the data to the extent of Spain. For this, we are using functionality 
from the <em>pyresample</em> library, which allows users to create customized area definitions.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># create some information on the reference system
</span><span class="n">area_id</span> <span class="o">=</span> <span class="s">"Spain"</span>
<span class="n">description</span> <span class="o">=</span> <span class="s">"Geographical Coordinate System clipped on Spain"</span>
<span class="n">proj_id</span> <span class="o">=</span> <span class="s">"Spain"</span>
<span class="c1"># specifing some parameters of the projection
</span><span class="n">proj_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s">"proj"</span><span class="p">:</span> <span class="s">"longlat"</span><span class="p">,</span> <span class="s">"ellps"</span><span class="p">:</span> <span class="s">"WGS84"</span><span class="p">,</span> <span class="s">"datum"</span><span class="p">:</span> <span class="s">"WGS84"</span><span class="p">}</span>
<span class="c1"># calculate the width and height of the aoi in pixels
</span><span class="n">llx</span> <span class="o">=</span> <span class="o">-</span><span class="mf">9.5</span> <span class="c1"># lower left x coordinate in degrees
</span><span class="n">lly</span> <span class="o">=</span> <span class="mf">35.9</span> <span class="c1"># lower left y coordinate in degrees
</span><span class="n">urx</span> <span class="o">=</span> <span class="mf">3.3</span> <span class="c1"># upper right x coordinate in degrees
</span><span class="n">ury</span> <span class="o">=</span> <span class="mf">43.8</span> <span class="c1"># upper right y coordinate in degrees
</span><span class="n">resolution</span> <span class="o">=</span> <span class="mf">0.005</span> <span class="c1"># target resolution in degrees
# calculating the number of pixels
</span><span class="n">width</span> <span class="o">=</span> <span class="nb">int</span><span class="p">((</span><span class="n">urx</span> <span class="o">-</span> <span class="n">llx</span><span class="p">)</span> <span class="o">/</span> <span class="n">resolution</span><span class="p">)</span>
<span class="n">height</span> <span class="o">=</span> <span class="nb">int</span><span class="p">((</span><span class="n">ury</span> <span class="o">-</span> <span class="n">lly</span><span class="p">)</span> <span class="o">/</span> <span class="n">resolution</span><span class="p">)</span>
<span class="n">area_extent</span> <span class="o">=</span> <span class="p">(</span><span class="n">llx</span><span class="p">,</span><span class="n">lly</span><span class="p">,</span><span class="n">urx</span><span class="p">,</span><span class="n">ury</span><span class="p">)</span>
<span class="c1"># defining the area
</span><span class="n">area_def</span> <span class="o">=</span> <span class="n">pr</span><span class="p">.</span><span class="n">geometry</span><span class="p">.</span><span class="n">AreaDefinition</span><span class="p">(</span><span class="n">area_id</span><span class="p">,</span> <span class="n">proj_id</span><span class="p">,</span> <span class="n">description</span><span class="p">,</span> <span class="n">proj_dict</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">,</span> <span class="n">area_extent</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">area_def</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>## Area ID: Spain
## Description: Spain
## Projection ID: Geographical Coordinate System clipped on Spain
## Projection: {'datum': 'WGS84', 'no_defs': 'None', 'proj': 'longlat', 'type': 'crs'}
## Number of columns: 2560
## Number of rows: 1579
## Area extent: (-9.5, 35.9, 3.3, 43.8)
## 
## /home/marus200/miniconda3/envs/bufr2netcdf/lib/python3.7/site-packages/pyproj/crs/crs.py:543: UserWarning: You will likely lose important projection information when converting to a PROJ string from another format. See: https://proj.org/faq.html#what-is-the-best-format-for-describing-coordinate-reference-systems
##   proj_string = self.to_proj4()
</code></pre></div></div>
<p>We will show here how to proceed when we want to extract more
than one specific data set. We can either apply a for loop
over the desired datasets we need or write a general function that can extract the data for any specified variable. Here we are going forward with
the latter approach because a function is more reusable than a 
simple script.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">nat2tif</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">calibration</span><span class="p">,</span> <span class="n">area_def</span><span class="p">,</span> <span class="n">dataset</span><span class="p">,</span> <span class="n">reader</span><span class="p">,</span> <span class="n">outdir</span><span class="p">,</span> <span class="n">label</span><span class="p">,</span> <span class="n">dtype</span><span class="p">,</span> <span class="n">radius</span><span class="p">,</span> <span class="n">epsilon</span><span class="p">,</span> <span class="n">nodata</span><span class="p">):</span>
  <span class="c1"># open the file
</span>  <span class="n">scn</span> <span class="o">=</span> <span class="n">Scene</span><span class="p">(</span><span class="n">filenames</span> <span class="o">=</span> <span class="p">{</span><span class="n">reader</span><span class="p">:</span> <span class="p">[</span><span class="nb">file</span><span class="p">]})</span>
  <span class="c1"># let us check that the specified data set is actually available
</span>  <span class="n">scn_names</span> <span class="o">=</span> <span class="n">scn</span><span class="p">.</span><span class="n">all_dataset_names</span><span class="p">()</span>
  <span class="c1"># raise exception if dataset is not present in available names
</span>  <span class="k">if</span> <span class="n">dataset</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">scn_names</span><span class="p">:</span>
    <span class="k">raise</span> <span class="nb">Exception</span><span class="p">(</span><span class="s">"Specified dataset is not available."</span><span class="p">)</span>
  <span class="c1"># we need to load the data, different calibration can be chosen
</span>  <span class="n">scn</span><span class="p">.</span><span class="n">load</span><span class="p">([</span><span class="n">dataset</span><span class="p">],</span> <span class="n">calibration</span><span class="o">=</span><span class="n">calibration</span><span class="p">)</span>
  <span class="c1"># let us extract the longitude and latitude data
</span>  <span class="n">lons</span><span class="p">,</span> <span class="n">lats</span> <span class="o">=</span> <span class="n">scn</span><span class="p">[</span><span class="n">dataset</span><span class="p">].</span><span class="n">area</span><span class="p">.</span><span class="n">get_lonlats</span><span class="p">()</span>
  <span class="c1"># now we can apply a swath definition for our output raster
</span>  <span class="n">swath_def</span> <span class="o">=</span> <span class="n">pr</span><span class="p">.</span><span class="n">geometry</span><span class="p">.</span><span class="n">SwathDefinition</span><span class="p">(</span><span class="n">lons</span><span class="o">=</span><span class="n">lons</span><span class="p">,</span> <span class="n">lats</span><span class="o">=</span><span class="n">lats</span><span class="p">)</span>
  <span class="c1"># and finally we also extract the data
</span>  <span class="n">values</span> <span class="o">=</span> <span class="n">scn</span><span class="p">[</span><span class="n">dataset</span><span class="p">].</span><span class="n">values</span>
  <span class="c1"># we will now change the datatype of the arrays
</span>  <span class="c1"># depending on the present data this can be changed
</span>  <span class="n">lons</span> <span class="o">=</span> <span class="n">lons</span><span class="p">.</span><span class="n">astype</span><span class="p">(</span><span class="n">dtype</span><span class="p">)</span>
  <span class="n">lats</span> <span class="o">=</span> <span class="n">lats</span><span class="p">.</span><span class="n">astype</span><span class="p">(</span><span class="n">dtype</span><span class="p">)</span>
  <span class="n">values</span> <span class="o">=</span> <span class="n">values</span><span class="p">.</span><span class="n">astype</span><span class="p">(</span><span class="n">dtype</span><span class="p">)</span>
  <span class="c1"># now we can already resample our data to the area of interest
</span>  <span class="n">values</span> <span class="o">=</span> <span class="n">pr</span><span class="p">.</span><span class="n">kd_tree</span><span class="p">.</span><span class="n">resample_nearest</span><span class="p">(</span><span class="n">swath_def</span><span class="p">,</span> <span class="n">values</span><span class="p">,</span>
                                             <span class="n">area_def</span><span class="p">,</span>
                                             <span class="n">radius_of_influence</span><span class="o">=</span><span class="n">radius</span><span class="p">,</span> <span class="c1"># in meters
</span>                                             <span class="n">epsilon</span><span class="o">=</span><span class="n">epsilon</span><span class="p">,</span>
                                             <span class="n">fill_value</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
  <span class="c1"># we are going to check if the outdir exists and create it if it doesnt
</span>  <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="n">exists</span><span class="p">(</span><span class="n">outdir</span><span class="p">):</span>
   <span class="n">os</span><span class="p">.</span><span class="n">makedir</span><span class="p">(</span><span class="n">outdir</span><span class="p">)</span>
  <span class="c1"># let us join our filename based on the input file's basename                                           
</span>  <span class="n">outname</span> <span class="o">=</span> <span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="n">join</span><span class="p">(</span><span class="n">outdir</span><span class="p">,</span> <span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="n">basename</span><span class="p">(</span><span class="nb">file</span><span class="p">)[:</span><span class="o">-</span><span class="mi">4</span><span class="p">]</span> <span class="o">+</span> <span class="s">"_"</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">label</span><span class="p">)</span> <span class="o">+</span> <span class="s">".tif"</span><span class="p">)</span>
  <span class="c1"># now we define some metadata for our raster file
</span>  <span class="n">cols</span> <span class="o">=</span> <span class="n">values</span><span class="p">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
  <span class="n">rows</span> <span class="o">=</span> <span class="n">values</span><span class="p">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
  <span class="n">pixelWidth</span> <span class="o">=</span> <span class="p">(</span><span class="n">area_def</span><span class="p">.</span><span class="n">area_extent</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">area_def</span><span class="p">.</span><span class="n">area_extent</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">cols</span>
  <span class="n">pixelHeight</span> <span class="o">=</span> <span class="p">(</span><span class="n">area_def</span><span class="p">.</span><span class="n">area_extent</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">area_def</span><span class="p">.</span><span class="n">area_extent</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span> <span class="o">/</span> <span class="n">rows</span>
  <span class="n">originX</span> <span class="o">=</span> <span class="n">area_def</span><span class="p">.</span><span class="n">area_extent</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
  <span class="n">originY</span> <span class="o">=</span> <span class="n">area_def</span><span class="p">.</span><span class="n">area_extent</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> 
  <span class="c1"># here we actually create the file
</span>  <span class="n">driver</span> <span class="o">=</span> <span class="n">gdal</span><span class="p">.</span><span class="n">GetDriverByName</span><span class="p">(</span><span class="s">"GTiff"</span><span class="p">)</span>
  <span class="n">outRaster</span> <span class="o">=</span> <span class="n">driver</span><span class="p">.</span><span class="n">Create</span><span class="p">(</span><span class="n">outname</span><span class="p">,</span> <span class="n">cols</span><span class="p">,</span> <span class="n">rows</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
  <span class="c1"># writing the metadata
</span>  <span class="n">outRaster</span><span class="p">.</span><span class="n">SetGeoTransform</span><span class="p">((</span><span class="n">originX</span><span class="p">,</span> <span class="n">pixelWidth</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">originY</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">pixelHeight</span><span class="p">))</span>
  <span class="c1"># creating a new band and writting the data
</span>  <span class="n">outband</span> <span class="o">=</span> <span class="n">outRaster</span><span class="p">.</span><span class="n">GetRasterBand</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
  <span class="n">outband</span><span class="p">.</span><span class="n">SetNoDataValue</span><span class="p">(</span><span class="n">nodata</span><span class="p">)</span> <span class="c1">#specified no data value by user
</span>  <span class="n">outband</span><span class="p">.</span><span class="n">WriteArray</span><span class="p">(</span><span class="n">np</span><span class="p">.</span><span class="n">array</span><span class="p">(</span><span class="n">values</span><span class="p">))</span> <span class="c1"># writting the values
</span>  <span class="n">outRasterSRS</span> <span class="o">=</span> <span class="n">osr</span><span class="p">.</span><span class="n">SpatialReference</span><span class="p">()</span> <span class="c1"># create CRS instance
</span>  <span class="n">outRasterSRS</span><span class="p">.</span><span class="n">ImportFromEPSG</span><span class="p">(</span><span class="mi">4326</span><span class="p">)</span> <span class="c1"># get info for EPSG 4326
</span>  <span class="n">outRaster</span><span class="p">.</span><span class="n">SetProjection</span><span class="p">(</span><span class="n">outRasterSRS</span><span class="p">.</span><span class="n">ExportToWkt</span><span class="p">())</span> <span class="c1"># set CRS as WKT
</span>  <span class="c1"># clean up
</span>  <span class="n">outband</span><span class="p">.</span><span class="n">FlushCache</span><span class="p">()</span>
  <span class="n">outband</span> <span class="o">=</span> <span class="bp">None</span>
  <span class="n">outRaster</span> <span class="o">=</span> <span class="bp">None</span>
  
</code></pre></div></div>

<p>Now we can apply this function to our input file and extract any available dataset. Note that some of the input variables need further explanation.
The very first option which might not be self-evident is calibration. With this 
option we can tell satpy to pre-calibrate the data, for example, to reflectance in
contrast to radiances. The option <em>label</em> appends the value of label to the 
ouput filename. With the <em>dtype</em> option, we can specifically choose which datatype
is used for the output file. Accordingly, we should adopt the value for nodata,
which flags no data values in the output file.
The options <em>radius</em> and <em>epsilon</em> are options of the nearest neighbor resampling
routine and can be specified to the user needs (see <a href="https://pyresample.readthedocs.io/en/latest/swath.html#pyresample-kd-tree">here</a> for more information).</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">nat2tif</span><span class="p">(</span><span class="nb">file</span> <span class="o">=</span> <span class="nb">file</span><span class="p">,</span> 
        <span class="n">calibration</span> <span class="o">=</span> <span class="s">"radiance"</span><span class="p">,</span>  
        <span class="n">area_def</span> <span class="o">=</span> <span class="n">area_def</span><span class="p">,</span>  
        <span class="n">dataset</span> <span class="o">=</span> <span class="s">"HRV"</span><span class="p">,</span> 
        <span class="n">reader</span> <span class="o">=</span> <span class="n">reader</span><span class="p">,</span> 
        <span class="n">outdir</span> <span class="o">=</span> <span class="s">"../assets/files"</span><span class="p">,</span>  
        <span class="n">label</span> <span class="o">=</span> <span class="s">"HRV"</span><span class="p">,</span> 
        <span class="n">dtype</span> <span class="o">=</span> <span class="s">"float32"</span><span class="p">,</span> 
        <span class="n">radius</span> <span class="o">=</span> <span class="mi">16000</span><span class="p">,</span> 
        <span class="n">epsilon</span> <span class="o">=</span> <span class="p">.</span><span class="mi">5</span><span class="p">,</span> 
        <span class="n">nodata</span> <span class="o">=</span> <span class="o">-</span><span class="mf">3.4E+38</span><span class="p">)</span>
</code></pre></div></div>
<p>Now we can read in the newly created file and take a look at a simple plot
to visualize our result (Note that in the background, I am using R to generate this plot quickly).</p>

<p><img src="/assets/blog_images/2020-05-10-nat2tif_files/figure-html/plot-1.png" alt="" /><!-- --></p>




    <div class="blog-navigation">
        
            <a class="prev" href="https://www.dariusgoergen.com/2020-05-10-bufr2tif/">&laquo; Translating EUMETSAT's .bfr files to GTiff</a>
        
        
            <a class="next" href="https://www.dariusgoergen.com/2020-06-21-docker/">Running docker-compose with postgis and R-Studio &raquo;</a>
        
    </div>



    <div class="related">
    
    
        
        
            
                
            
                
            
                
            
        
            
                
            
                
            
                
            
        
            
                
            
                
            
                
            
        
    
        
        
            
                
            
                
            
                
            
        
            
                
            
                
            
                
            
        
            
                
            
                
            
                
            
        
    
        
        
            
                
            
                
            
                
            
        
            
                
            
                
            
                
            
        
            
                
            
                
            
                
            
        
    
        
        
            
                
            
                
            
                
            
        
            
                
            
                
            
                
            
        
            
                
            
                
            
                
                    
                    <h4>Related Posts</h4>
                    <ul>
                    
                    <li class="relatedPost">
                        <a href="https://www.dariusgoergen.com/2020-05-10-bufr2tif/">Translating EUMETSAT's .bfr files to GTiff
                        
                        </a>
                    </li>
                    
                    
                
            
        
    
        
        
            
                
            
                
            
                
            
        
            
                
            
                
            
                
            
        
            
                
            
                
            
                
            
        
    
        
        
            
                
            
                
            
                
            
        
            
                
            
                
            
                
            
        
            
                
            
                
            
                
            
        
            
                
            
                
            
                
            
        
    
        
        
            
                
            
                
            
                
            
        
            
                
            
                
            
                
            
        
            
                
            
                
            
                
            
        
            
                
            
                
            
                
            
        
            
                
            
                
            
                
            
        
    
        
        
            
                
            
                
            
                
            
        
            
                
            
                
            
                
            
        
            
                
            
                
            
                
            
        
    
        
        
            
                
            
                
            
                
            
        
            
                
            
                
            
                
            
        
            
                
            
                
            
                
            
        
    
    
        </ul>
    
</div>




    <section class="author">
    <div class="toleft">
        <img class="selfie" src="https://www.dariusgoergen.com/assets/images/dg.png" alt="Darius A. Görgen">
    </div>

    <div class="toright">
        <h4 class="name">Darius A. Görgen</h4>
        <p class="bio">Passionate about environmental sciences and human-environmental interactions</p>

        <div class="share">
            <!-- Note: Only use three share links if your site width is set to large -->
            <!-- If site width is set to normal, you may choose any two share links -->
            <a class="twitter" href="https://twitter.com/intent/tweet?text=https://www.dariusgoergen.com/2020-05-10-nat2tif/ - Translating EUMETSAT's .nat files to GTiff by @">
                <svg class="icon"><use xlink:href='#fab.fa-twitter'></use></svg>
                <span class="icon-twitter">Tweet</span>
            </a>

            <a class="facebook" href="javascript:void(0)" onclick="window.open('https://facebook.com/sharer/sharer.php?u='+encodeURIComponent(location.href), 'facebook-share-dialog', 'width=626,height=436'); return false;">
                <svg class="icon"><use xlink:href='#fab.fa-facebook'></use></svg>
                <span class="icon-facebook-rect">Share</span>
            </a>

            <!-- <a class="linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https://www.dariusgoergen.com/2020-05-10-nat2tif/&amp;title=Translating EUMETSAT's .nat files to GTiff&amp;summary=Python code to translate EUMETSAT's .nat datasets to GTiffs.&amp;source=https://www.dariusgoergen.com" target="_blank">
                <svg class="icon"><use xlink:href='#fab.fa-linkedin'></use></svg>
                <span class="icon-linkedin">Share</span>
            </a> -->

            <!-- <a class="reddit" href="https://reddit.com/submit?url=https://www.dariusgoergen.com/2020-05-10-nat2tif/&amp;title=Translating EUMETSAT's .nat files to GTiff" target="_blank">
                <svg class="icon"><use xlink:href='#fab.fa-reddit'></use></svg>
                <span class="icon-reddit">Share</span>
            </a> -->
        </div>
    </div>
</section>




    <section class="disqus">
    <div id="disqus_thread"></div>
    <script type="text/javascript">

        var disqus_config = function () {
            this.page.url = 'https://www.dariusgoergen.com/2020-05-10-nat2tif/';
            this.page.identifier = '/2020-05-10-nat2tif';
        };
        var disqus_shortname = 'https-goergen95-github-io';
        var disqus_developer = 0;
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</section>




<footer class="footer-main">
    <span class="copyright">
        Darius A. Görgen © 2022
    </span>
    
    <a class="link" href="https://www.dariusgoergen.com/feed.xml" target="_blank">
        <svg class="icon"><use xlink:href='#fas.fa-rss'></use></svg>
    </a>

    <p class="extra">
        <a class="link" href="https://github.com/sergiokopplin/indigo">Indigo theme</a> by <a class="link" href="https://github.com/sergiokopplin/indigo">Kopplin</a>
    </p>
</footer>


        </div>
    </div>

    <svg display="none" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                  <defs>
                  <!--
                  Font Awesome Free 5.5.0 by @fontawesome - https://fontawesome.com
                  License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
                  -->
              <symbol id='fab.fa-twitter' viewBox='0 0 512 512'>
            <title>twitter</title>
            <path class='path1' d='M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z'></path>
        </symbol>
        <symbol id='fab.fa-facebook' viewBox='0 0 448 512'>
            <title>facebook</title>
            <path class='path1' d='M448 56.7v398.5c0 13.7-11.1 24.7-24.7 24.7H309.1V306.5h58.2l8.7-67.6h-67v-43.2c0-19.6 5.4-32.9 33.5-32.9h35.8v-60.5c-6.2-.8-27.4-2.7-52.2-2.7-51.6 0-87 31.5-87 89.4v49.9h-58.4v67.6h58.4V480H24.7C11.1 480 0 468.9 0 455.3V56.7C0 43.1 11.1 32 24.7 32h398.5c13.7 0 24.8 11.1 24.8 24.7z'></path>
        </symbol>
        <symbol id='fab.fa-linkedin' viewBox='0 0 448 512'>
            <title>linkedin</title>
            <path class='path1' d='M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z'></path>
        </symbol>
        <symbol id='fab.fa-reddit' viewBox='0 0 512 512'>
            <title>reddit</title>
            <path class='path1' d='M201.5 305.5c-13.8 0-24.9-11.1-24.9-24.6 0-13.8 11.1-24.9 24.9-24.9 13.6 0 24.6 11.1 24.6 24.9 0 13.6-11.1 24.6-24.6 24.6zM504 256c0 137-111 248-248 248S8 393 8 256 119 8 256 8s248 111 248 248zm-132.3-41.2c-9.4 0-17.7 3.9-23.8 10-22.4-15.5-52.6-25.5-86.1-26.6l17.4-78.3 55.4 12.5c0 13.6 11.1 24.6 24.6 24.6 13.8 0 24.9-11.3 24.9-24.9s-11.1-24.9-24.9-24.9c-9.7 0-18 5.8-22.1 13.8l-61.2-13.6c-3-.8-6.1 1.4-6.9 4.4l-19.1 86.4c-33.2 1.4-63.1 11.3-85.5 26.8-6.1-6.4-14.7-10.2-24.1-10.2-34.9 0-46.3 46.9-14.4 62.8-1.1 5-1.7 10.2-1.7 15.5 0 52.6 59.2 95.2 132 95.2 73.1 0 132.3-42.6 132.3-95.2 0-5.3-.6-10.8-1.9-15.8 31.3-16 19.8-62.5-14.9-62.5zM302.8 331c-18.2 18.2-76.1 17.9-93.6 0-2.2-2.2-6.1-2.2-8.3 0-2.5 2.5-2.5 6.4 0 8.6 22.8 22.8 87.3 22.8 110.2 0 2.5-2.2 2.5-6.1 0-8.6-2.2-2.2-6.1-2.2-8.3 0zm7.7-75c-13.6 0-24.6 11.1-24.6 24.9 0 13.6 11.1 24.6 24.6 24.6 13.8 0 24.9-11.1 24.9-24.6 0-13.8-11-24.9-24.9-24.9z'></path>
        </symbol>
        <symbol id='fas.fa-rss' viewBox='0 0 448 512'>
            <title>rss</title>
            <path class='path1' d='M128.081 415.959c0 35.369-28.672 64.041-64.041 64.041S0 451.328 0 415.959s28.672-64.041 64.041-64.041 64.04 28.673 64.04 64.041zm175.66 47.25c-8.354-154.6-132.185-278.587-286.95-286.95C7.656 175.765 0 183.105 0 192.253v48.069c0 8.415 6.49 15.472 14.887 16.018 111.832 7.284 201.473 96.702 208.772 208.772.547 8.397 7.604 14.887 16.018 14.887h48.069c9.149.001 16.489-7.655 15.995-16.79zm144.249.288C439.596 229.677 251.465 40.445 16.503 32.01 7.473 31.686 0 38.981 0 48.016v48.068c0 8.625 6.835 15.645 15.453 15.999 191.179 7.839 344.627 161.316 352.465 352.465.353 8.618 7.373 15.453 15.999 15.453h48.068c9.034-.001 16.329-7.474 16.005-16.504z'></path>
        </symbol>
        </defs>
              </svg>


</body>
</html>

